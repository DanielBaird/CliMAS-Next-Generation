!function t(e,i,n){function r(a,l){if(!i[a]){if(!e[a]){var o="function"==typeof require&&require;if(!l&&o)return o(a,!0);if(s)return s(a,!0);throw new Error("Cannot find module '"+a+"'")}var p=i[a]={exports:{}};e[a][0].call(p.exports,function(t){var i=e[a][1][t];return r(i?i:t)},p,p.exports,t,e,i,n)}return i[a].exports}for(var s="function"==typeof require&&require,a=0;a<n.length;a++)r(n[a]);return r}({1:[function(t){t("./mapview/main"),$("header").disableSelection(),$("nav > ul").mspp({})},{"./mapview/main":2}],2:[function(t){var e;window.console||(window.console={log:function(){return{}}}),e=t("./views/app"),$(function(){var t;return t=new e,t.render()})},{"./views/app":4}],3:[function(t,e){var i;i=Backbone.Model.extend({constructor:function(t,e,i){return this.shortName=t,this.longName=e,this.path=i,null}}),e.exports=i},{}],4:[function(t,e){var i,n;n=t("../models/maplayer"),i=Backbone.View.extend({tagName:"div",className:"splitmap",id:"splitmap",trackSplitter:!1,trackPeriod:100,events:{"click #btn-change":"toggleForms","click #btn-compare":"toggleSplitter"},initialize:function(){return this.mapLayer=new n("left","Left Map","left.map"),_.bindAll(this),this.speciesInfoFetchProcess=this.fetchSpeciesInfo()},render:function(){return this.$el.append(i.templates.layout({leftTag:i.templates.leftTag(),rightTag:i.templates.rightTag(),leftForm:i.templates.leftForm()})),$("#contentwrap").append(this.$el),this.map=L.map("map",{center:[-20,136],zoom:5}),L.tileLayer("http://otile1.mqcdn.com/tiles/1.0.0/map/{z}/{x}/{y}.png",{maxZoom:18}).addTo(this.map),this.leftForm=this.$el.find(".left.form"),this.buildLeftForm(),this.leftTag=this.$el.find(".left.tag"),this.rightTag=this.$el.find(".right.tag"),this.splitLine=this.$el.find(".splitline"),this.splitThumb=this.$el.find(".splitthumb")},centreMap:function(t){var e,i,n;for(t||(t=500),n=[],e=i=0;t>=i;e=i+=25)n.push(setTimeout(function(t){return function(){return t.map.invalidateSize(!1)}}(this),e));return n},toggleForms:function(){return this.$el.toggleClass("showforms"),this.centreMap()},toggleSplitter:function(){return this.$el.toggleClass("split"),this.$el.hasClass("split")?this.activateSplitter():this.deactivateSplitter(),this.centreMap()},fetchSpeciesInfo:function(){return $.ajax({url:"/data/species"}).done(function(t){return function(e){var i,n;return i=[],n=[],$.each(e,function(t,e){return n.push(t),e?$.each(e,function(e,n){return i.push({label:n+" ("+t+")",value:t})}):i.push({label:t,value:t})}),t.speciesLookupList=i,t.speciesSciNameList=n}}(this))},buildLeftForm:function(){return this.speciesInfoFetchProcess.done(function(t){return function(){return t.$el.find("#leftmapthing").autocomplete({source:t.speciesLookupList})}}(this))},startSplitterTracking:function(){return this.trackSplitter=!0,this.splitLine.addClass("dragging"),this.locateSplitter()},locateSplitter:function(){return this.trackSplitter?(this.resizeThings(),0===this.trackSplitter?this.trackSplitter=!1:this.trackSplitter!==!0&&(this.trackSplitter-=1),setTimeout(this.locateSplitter,this.trackPeriod)):void 0},stopSplitterTracking:function(){return this.splitLine.removeClass("dragging"),this.trackSplitter=5},activateSplitter:function(){return this.splitThumb.draggable({containment:$("#mapwrapper"),scroll:!1,start:this.startSplitterTracking,drag:this.resizeThings,stop:this.stopSplitterTracking}),this.resizeThings()},deactivateSplitter:function(){return this.splitThumb.draggable("destroy"),this.resizeThings()},resizeThings:function(){var t;return this.$el.hasClass("split")?(t=this.splitThumb.position().left+this.splitThumb.width()/2,this.splitLine.css("left",t),this.leftTag.css("clip","rect(0 "+t+"px auto 0)")):this.leftTag.css("clip","rect(auto auto auto auto)")}},{templates:{layout:_.template('<div class="splitline"></div>\n<div class="splitthumb"><span>&#x276e; &#x276f;</span></div>\n<div class="left tag"><%= leftTag %></div>\n<div class="right tag"><%= rightTag %></div>\n<div class="left form"></div>\n<div class="right form"></div>\n<div id="mapwrapper"><div id="map"></div></div>'),leftTag:_.template('<div>\n    <input id="leftmapthing" name="leftmapthing" placeholder="&hellip; start typing species or group name &hellip;" />\n    <button id="btn-change">change</button>\n    <button id="btn-compare">compare</button>\n</div>'),rightTag:_.template('<div>\n    <input id="rightmapthing" name="rightmapthing" placeholder="&hellip; start typing species or group name &hellip;" />\n</div>'),leftForm:_.template("")}}),e.exports=i},{"../models/maplayer":3}]},{},[1]);